<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Armora Grenade - Virtualization Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Armora Grenade Logo">
                <h1>Armora Grenade</h1>
            </div>
            <p class="tagline">The Ultimate BSD Virtualization Management Solution</p>
        </header>

        <div class="status-bar">
            Libvirt Connection: <span id="libvirt-status" class="status-indicator disconnected">Disconnected</span>
        </div>

        <nav class="tabs">
            <button class="tab-button active" data-tab="vms">Virtual Machines</button>
            <button class="tab-button" data-tab="create-vm">Create VM</button>
            <button class="tab-button" data-tab="storage">Storage</button>
            <button class="tab-button" data-tab="network">Network</button>
            <button class="tab-button" data-tab="settings">Settings</button>
        </nav>

        <div class="tab-content active" id="vms">
            <h2><i class="fas fa-server"></i> Virtual Machines</h2>
            <div class="vm-actions">
                <button id="refresh-vms-btn" class="btn primary"><i class="fas fa-sync-alt"></i> Refresh VMs</button>
            </div>
            <div class="vm-list-container">
                <div id="vm-list" class="grid-view">
                    <p id="no-vm-message" class="info-message" style="display: none;">No virtual machines found.</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="create-vm">
            <h2><i class="fas fa-plus-circle"></i> Create New Virtual Machine</h2>
            <form id="create-vm-form">
                <div class="form-group">
                    <label for="vm-name">VM Name:</label>
                    <input type="text" id="vm-name" required placeholder="e.g., MyNewBSDVM">
                </div>
                <div class="form-group">
                    <label for="vm-memory">Memory (MB):</label>
                    <input type="number" id="vm-memory" value="1024" min="128" required>
                </div>
                <div class="form-group">
                    <label for="vm-vcpu">vCPUs:</label>
                    <input type="number" id="vm-vcpu" value="1" min="1" required>
                </div>
                <div class="form-group">
                    <label for="vm-disk-path">Disk Path:</label>
                    <input type="text" id="vm-disk-path" value="/var/lib/libvirt/images/new_vm.qcow2" required>
                    <small>Example: /var/lib/libvirt/images/myvm.qcow2</small>
                </div>
                <div class="form-group">
                    <label for="vm-disk-size">Disk Size (GB):</label>
                    <input type="number" id="vm-disk-size" value="20" min="1" required>
                    <small>Note: Disk file must be created manually (e.g., `qemu-img create -f qcow2 disk_path sizeG`)</small>
                </div>
                <div class="form-group">
                    <label for="vm-iso-path">OS ISO Path (Optional):</label>
                    <input type="text" id="vm-iso-path" placeholder="e.g., /path/to/freebsd.iso">
                    <small>If provided, VM will boot from this ISO.</small>
                </div>
                <div class="form-group">
                    <label for="vm-network-bridge">Network Bridge:</label>
                    <input type="text" id="vm-network-bridge" value="virbr0" required>
                    <small>Commonly 'virbr0' or 'br0'.</small>
                </div>
                <button type="submit" class="btn primary"><i class="fas fa-magic"></i> Create VM</button>
            </form>
            <div id="create-vm-message" class="info-message" style="display: none;"></div>
        </div>


        <div class="tab-content" id="storage">
            <h2><i class="fas fa-database"></i> Storage Management</h2>
            <div class="storage-actions">
                <button id="refresh-pools-btn" class="btn primary"><i class="fas fa-sync-alt"></i> Refresh Storage Pools</button>
            </div>
            <div id="storage-pools-list" class="grid-view">
                <p id="no-pool-message" class="info-message" style="display: none;">No storage pools found.</p>
            </div>
            </div>

        <div class="tab-content" id="network">
            <h2><i class="fas fa-network-wired"></i> Network Configuration</h2>
            <p>Network configuration features coming soon!</p>
        </div>

        <div class="tab-content" id="settings">
            <h2><i class="fas fa-cog"></i> Settings</h2>
            <p>Application settings and preferences coming soon!</p>
        </div>
    </div>

    <footer>
        Armora Grenade &copy; 2025 Armora Security. All rights reserved.
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
